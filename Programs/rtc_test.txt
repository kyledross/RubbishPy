' Real-time clock test
' Pre-requisites:
' Compiler at address 0
' Processor
' RTC at 1024

' Usage:
' python3 main.py --compiler address=0 size=1024 --rtc address=1024 interrupt=7 program=../Programs/rtc_test.txt --processor --ram address=1025 size=32
'

siv 7 clock_tick
main: sleep
jmp main

clock_tick:
lrm 1 1024
debug

# registers
# register 7 = remaining seconds

# process time into memory
# 1025 = year
# 1026 = month
# 1027 = day
# 1028 = hour
# 1029 = minute
# 1030 = second


# todo: push registers onto stack
# phase 1... get days since epoch
lr 2 86400
div
# register 3 is days since epoch
# register 4 is remaining seconds... save this for later use
lrr 7 4

# phase 2... approximate years
lrr 1 3
lr 2 365
div
lrr 1 3
lr 2 1970
add
# register 3 contains approximate year


# todo: pop registers from stack
rtn
